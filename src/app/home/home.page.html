<ion-content>
    <ion-grid *ngIf="!isLoading">
        <ion-row>
            <ion-col size-md="12" size-lg="8" offset-lg="2">
                <div class="container">
                    <img class="background-img" src="/assets/images/mountain-1.jpg" />

                    <div class="top-right" (click)="onLogout()">
                        <span class="material-icons-outlined"> logout </span>
                    </div>

                    <div class="centered">
                        <h1>{{house.pageTitle}}</h1>

                        <hr />

                        <h5>{{house.pageSubtitle}}</h5>
                    </div>
                </div>
            </ion-col>
        </ion-row>

        <ion-row *ngIf="!isAdmin">
            <ion-col size-md="12" size-lg="8" offset-lg="2">
                <div class="content-card">
                    <p>{{house.welcomeMessage}}</p>
                    <br />
                    <div class="date-display" *ngIf="house.periodOfStayWidget">
                        <ion-row>
                            <ion-col size="7">
                                <p>Ihre Buchung:</p>
                            </ion-col>
                            <ion-col>
                                <div class="filled-display">
                                    <p>
                                        {{ user.arriveDate | date: "dd.MM" }} - {{ user.leaveDate | date: "dd.MM" }}
                                    </p>
                                </div>
                            </ion-col>
                        </ion-row>
                    </div>
                </div>
            </ion-col>
        </ion-row>

        <ion-row *ngIf="isAdmin" class="admin-card">
            <ion-col size-md="12" size-lg="8" offset-lg="2">
                <div class="content-card">
                    <p>
                        Sie sind als Administrator eingeloggt. Hier können Sie ganz einfach einen neuen Gast hinzufügen.
                    </p>

                    <br />

                    <ion-button (click)="onOpenAdminPage()" class="admin-button">
                        Gast hinzufügen
                    </ion-button>
                </div>
                <div *ngIf="!loadedUsers.length && !isLoading" class="guest-list">
                    <p class="no-guests">momentan keine aktiven Gäste</p>
                </div>
                <div *ngIf="loadedUsers.length && !isLoading " class="guest-list">
                    <p class="guest-title">Aktive/Zukünftige Gäste</p>
                    <ion-list *ngFor="let user of loadedUsers">
                        <app-user-item [user]="user" (click)="onOpenUserDetailModal(user)"></app-user-item>
                    </ion-list>
                </div>
            </ion-col>
        </ion-row>

        <ion-row class="content-row-small">
            <ion-col size-md="12" size-lg="8" offset-lg="2">
                <app-action-card *ngIf="user.arriveDate > currentDate" title="Bevor Sie Ankommen" subtitle="Teilen Sie uns einfach mit wie Sie ankommen möchten. Wir kümmern uns darum!" image="/assets/images/mountain-person.jpg" (click)="onOpenBeforeArrival()"></app-action-card>

                <div class="action-field">
                    <ion-row class="centered-horizontal">
                        <app-action-card-small *ngIf="house.apartmentDetailService" title="Ihre Wohnung" icon="bed" image="/assets/images/apartment.jpeg" (click)="onOpenApartmentDetailPage()">
                        </app-action-card-small>

                        <app-action-card-small *ngIf="house.breakfastService" title="Frühstücks Service" icon="bakery_dining" image="/assets/images/bread.jpg" (click)="onOpenBreadOrderPage()">
                        </app-action-card-small>

                        <app-action-card-small *ngIf="house.saunaService" title="Sauna Reservieren" icon="hot_tub" image="/assets/images/sauna.jpeg" (click)="onOpenReservationPage()">
                        </app-action-card-small>

                        <app-action-card-small *ngIf="house.feedbackService" title="Bewerten Sie uns" icon="grade" image="/assets/images/feedback.jpg" (click)="onOpenFeedbackLink()">
                        </app-action-card-small>

                        <hr />

                        <ion-button (click)="user.email === 'admin' ? onOpenContactsPage() : onOpenMessagePage()">
                            Nachricht Schreiben
                            <ion-icon name="chatbubbles"></ion-icon>
                        </ion-button>
                    </ion-row>
                </div>
            </ion-col>
        </ion-row>
        <ion-row class="space"></ion-row>
    </ion-grid>
    <ion-grid *ngIf="isLoading">
        <div class="spinner-container">
            <ion-spinner name="dots"></ion-spinner>
        </div>
    </ion-grid>
</ion-content>